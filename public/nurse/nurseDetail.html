<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>Login </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="nurseDetail.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="./assets/img/">
    
</head>
<body>
    <div id="Header">  
        <div class="row">
            <div class="col-lg-2 col-6">
                <div class="Logo">
                    <h1>
                        <a title="BKMEET" alt="BKMEET VIETNAM" href="../index1.html">BKMEET</a>
                    </h1>
                </div>
            </div>
            <div class="col-lg-10 col-6">
                <div class="main-menu">
                    <ul class="nav">
                        <li>
                          <a href="nurseFunctions.html">
                              Home
                              
                          </a>                  
                        </li>
                        <li>
                            <a href="AppointmentWithPatient.html">
                                My Appoinments
                               
                            </a>
                            
                        </li>
                        <li>
                            <a href="nurseDetail.html">
                                My Information
                                
                            </a>
                            
                        </li>
                        <li>
                            <a href="PatientList.html">
                                Patient List
                               
                            </a>
                            
                        </li>
                        <li id="logoutLink">
                            <a>
                              <i class="fa-solid fa-user-minus"></i>
                            </a>
                                
                            
                        </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    
        <div class="Header-line"></div>
      </div>


    <div id="test1">
        <h1 id="form">Your Information</h1>
    </div>
    <div id="bg">
        <div id="infor1">
            <div id="ava">
                <div id="avatop">
                    <div class="header2" >Your Avatar</div>
                    <input type="file" id="avatar" accept="image/*">
                    <div>
                        <img id="AvatarDisplay" src="#" alt="Selected Image" style="display:none; max-width: 100%; max-height: 200px;">
                        
                    </div>
                </div>

                <div id="avabelow">
                    <div class="header2 below"  >Upload your degree</div>
                    <input type="file" id="degree" accept="image/*">
                        <div>
                            <img id="imageDisplay" src="#" alt="Selected Image" style="display:none; max-width: 100%; max-height: 200px;">
                        </div>
                </div>
                
                
               
            </div>
           <div id="detail">
                <div class="header2">Detail</div>
                <div class="form-field">
                    <i class='bx bxs-user'></i>
                    <input type="text" class="form-input" placeholder=" " id="full_name" >
                    <label for="name" class="form-label">Full Name</label>
                    
                </div>   
                <!-- <input type="text" id="full_name" placeholder="Full name"> -->
                <div class="form-field">
                    <i class='bx bx-male-female'></i>
                    <input type="text" class="form-input" placeholder=" " id="gender" >
                    <label for="name" class="form-label">Gender</label>
                </div>   
                <!-- <input type="text" id="gender" placeholder="Gender"> -->
                <div class="form-field">
                    <i class='bx bx-message-square'></i>
                    <input type="text" class="form-input" placeholder=" " id="age" >
                    <label for="name" class="form-label">Age</label>
                </div>   
                <!-- <input type="text" id="age" placeholder="Age"> -->
                <div class="form-field">
                    <i class='bx bxs-phone'></i>
                    <input type="text" class="form-input" placeholder=" " id="number" >
                    <label for="name" class="form-label">Phone Number</label>
                </div>   
                <!-- <input type="text" id="number" placeholder="Phone Number"> -->
                <div class="form-field">
                    <i class='bx bxs-envelope' ></i>
                    <input type="text" class="form-input" placeholder=" " id="email" >
                    <label for="name" class="form-label">Email</label>
                </div>   
                <!-- <input type="text" id="email" placeholder="Email"> -->
                <div class="form-field">
                    <i class='bx bxs-home'></i>
                    <input type="text" class="form-input" placeholder=" " id="address" >
                    <label for="name" class="form-label">Address</label>
                </div>   
                <!-- <input type="text" id="address" placeholder="Address"> -->
                    
                <div class="form-field">
                    <i class='bx bx-briefcase'></i>
                    <input type="text" class="form-input" placeholder=" " id="specialist" list="CLINIC_LIST">
                    <label for="name" class="form-label">Choose a clinic</label>
                </div>
                <!-- <input type="text" id="specialist" list="CLINIC_LIST" placeholder="Choose a clinic"> -->
                        <datalist id="CLINIC_LIST">
                            <option value="Ophthalmology">
                            <option value="Otorhinolaryngology">
                            <option value="Dermatology">
                            </option>
                        </datalist>             
           </div>  
        </div>
        <div id="button_cointer">
            <button onclick="SubmitInformation()">Submit</button>
        </div>
    </div>
    
    




    <footer>
        <div class="container margin_60_35">
    <div class="row">
       <div class="col-lg-4 col-md-12">
           <p>
               <a href="../index1.html" title="BKMEET ONLINE APPOINTMENT PLATFORM">
                   <img src="/public/assets/img/logo.jpg" alt="BKMEET INDIA'S BEST ONLINE APPOINTMENT SCHEDULING PLATFORM" width="200" height="auto" class="img-fluid">
               </a>
           </p>
           <h5>Online Appointment Scheduling Platform</h5>
           <!-- <ul class="contacts">
               <li><a href="https://g.page/BKMEET" target="_new"><i class="fa fa-map-marker"></i>Nasscom Startup Warehouse, Infopark Campus, Kakkanad, Kerala, India</a></li>
               <li><a href="tel://+91 9496 947 548"><i class="fa fa-mobile-phone"></i>+91 9496 947 548</a></li>
               <li><a href="mailto:post@BKMEET.com"><i class="fa fa-envelope"></i>post@BKMEET.com</a></li>
           </ul> -->
           <div class="follow_us">
               <h5>Follow us</h5>
               <ul>
                   <li><a href="../index1.html" target="_new"><i class="fab fa-facebook"></i></a></li>
                   <li><a href="../index1.html" target="_new"><i class="fab fa-twitter"></i></a></li>
                   <li><a href="../index1.html" target="_new"><i class="fab fa-linkedin"></i></a></li>
                   <li><a href="../index1.html" target="_new"><i class="fab fa-instagram"></i></a></li>
                   <!-- <li><a href="https://api.whatsapp.com/send?phone=919496947548&amp;text=BKMEET%20-%20Confirmed%20Online%20Appointment" target="_new"><i class="fab fa-whatsapp"></i></a></li>
                   <li><a href="https://youtube.com/@BKMEET" target="_new"><i class="fab fa-youtube" target="_new"></i></a></li>
                   <li><a href="https://play.google.com/store/apps/dev?id=4852298828600166862" target="_new"><i class="fab fa-android" target="_new"></i></a></li> -->
               </ul>
           </div><br>
           <!-- <p>
               <a href="https://play.google.com/store/apps/details?id=com.BKMEET.app" target="_new" title="BKMEET mobile app now available on Google playstore">
                   <img src="https://www.BKMEET.com/img/bnm/google-play-badge-bnm-vc-01.svg" width="120" height="36" alt="BKMEET mobile app now available on Google playstore" class="img-fluid">
               </a>
           </p> -->
           
       </div>
       <div class="col-lg-3 col-md-4">
       
           <!-- <ul class="links">
           <li><a href="/clinicalprocedures">Clinical Procedure Scheduling</a></li>
           <li><a href="/vaccination">Vaccination</a></li>
           <li><a href="/nutritionpractice">Nutrition Practice</a></li>
           <li><a href="/compareplans">Compare Plans</a></li>
               <li><a href="/terms">Terms of Use</a></li>
               <li><a href="/privacy">Privacy Policy</a></li>
               <li><a href="/personalinformationpolicy">Personal Information Policy</a></li>
               <li><a href="/videoconsultationpolicy">Video Consultation Policy</a></li>
               <li><a href="/trademarknotice">Trade Mark Notice</a></li>
               <li><a href="/faq">FAQ</a></li>
               
               <li><a href="/limitedoffer">Special Offer</a></li>
           </ul> -->
           <p>Subscribe to BKMEET Newsletter to get Important News, Amazing Offers &amp; Inside Scoops:</p>
            <form method="post" action="" class="rd-mailform subscribe" id="subscription_mail" data-parsley-validate="" novalidate="">
                <input type="hidden" name="form-type" value="subscribe">
                <input id="email_id" name="email_id" data-parsley-trigger="change" required="" type="email" class="form-control" placeholder="Email">
                <br>
                <!-- <input type="submit" class="btn_1" value="Submit"><div class="mfInfo"></div>												  -->
            </form>
       </div>
          
       <!-- <div class="col-lg-5 col-md-5" id="homepagesection">
           <a class="btn btn-sm btn-primary" href="https://www.BKMEET.com/demo">Request BKMEET Demo</a>
           <a class="btn btn-sm btn-primary" href="https://www.BKMEET.com/career">Career@BKMEET</a>
           <a class="btn btn-sm btn-primary" href="https://www.BKMEET.com/webstories/bnm-amp-stories.html">WEBSTORIES</a>
           <h5 style="margin-top: 20px;">Your guaranteed Mobile Online Appointment</h5>
           <p>With BKMEET productivity tool, be successful in avoiding unscheduled absences. let our tool support you to be a leader in your medical practice. The best online appointment scheduling Platform enhances your practice management with online profile visibility.</p>
           
       </div> -->
       
    </div>
    <br><br>
    <!--/row-->
    <div class="row">
       <div class="col-md-12">
                         </div>
    </div>
    <br>
    <!-- <div class="row">
       <div class="col-md-12">
       
           <p>
               <a target="_blank" href="http://www.newindianexpress.com/cities/kochi/2017/feb/08/book-n-meet-a-doctor-1568476.html"><img style="width:168px;height:21px;margin-right:25px;" alt="BKMEET startup based in Kochi featured by National media,The New IndianExpress-Startupedia" class="img-fluid" src="https://www.BKMEET.com/img/theNewIndianExpress-BKMEET-2020.png"></a>
               
               <a target="_blank" href="http://epaperbeta.timesofindia.com/Article.aspx?eid=31811&amp;articlexml=Startups-wake-up-to-new-avenues-30072017002046"><img style="width: 165px;height:21px;margin-right:25px" alt="BKMEET startup based in Kochi featured by National media,The Times of India-TOI-Startup feature by local correspondant" class="img-fluid" src="https://www.BKMEET.com/img/theTimesofIndia-BKMEET-2020.png"></a>
               
               <a target="_blank" href="https://www.vanitha.in/justin/book-in-meet-prashanthi-nadhan-article-vanitha.html"><img style="width: 127px;height:36px;" alt="BKMEET startup based in Kochi featured by National media,Vanitha-Startup feature by local correspondant" class="img-fluid" src="https://www.BKMEET.com/img/Vanitha-Manorama-BKMEET-2020.png"></a>
           
           </p>
       
       </div>
    
    </div> -->
    <hr>
    <div class="row">
       <!-- <div class="col-md-8">
           <ul id="additional_links">
               <li><a href="https://qstat.co" target="_new" title="BKMEET QMS WITH TOKEN">QSTAT</a></li>
               <li><a href=" http://startups.startupmission.in/c/460" class="text-transform-none" target="_blank" title="Kerala Startup Mission Certified Startup">KSUM</a></li>
               <li><a href="https://www.startupindia.gov.in/content/sih/en/profile.Startup.59807990e4b0bed982a4ed5c.html" class="text-transform-none" target="_blank" title="Govt. of India Certified Startup">STARTUPINDIA</a></li>
           </ul>
       </div> -->
       <div class="col-md-4">
           <div id="copy">Copyright © 2024 All Rights Reserved by <a href="../index1.html">BKMEET®</a></div>
       </div>
    </div>
    </div>
    </footer>



</body>

<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-storage.js"></script>

<script src="../index1.js"></script>


<script>
    document.addEventListener('DOMContentLoaded',function(){
        checkSubmit()
    })
    document.getElementById('degree').addEventListener('change', function(event){
        const selectedFile = event.target.files[0]
        const fullName = document.getElementById('full_name').value
        const specialist = document.getElementById('specialist').value
        const phoneNumber = document.getElementById('number').value
        if(fullName && specialist && selectedFile){
            if(selectedFile){
            const imageRef = firebase.storage().ref().child('Degree/' + specialist + '/' + 'Nurse/' + phoneNumber)
            const uploadTask = imageRef.put(selectedFile)

            uploadTask.then((snapshot) => {
                console.log('upload Photo succesfully')
                return snapshot.ref.getDownloadURL()
            }).then((downloadURL) => {
                localStorage.setItem('URLimgage',downloadURL)
                const imageDisplay = document.getElementById('imageDisplay')
                imageDisplay.src = downloadURL;
                imageDisplay.style.display = 'block'
            }).catch((error) => {
            console.error('Loi', error)})
        }
        }else{
            return
        }
        
    })
    document.getElementById('avatar').addEventListener('change', function(event){
        const selectedFile = event.target.files[0]
        const fullName = document.getElementById('full_name').value
        const specialist = document.getElementById('specialist').value
        const phoneNumber = document.getElementById('number').value
        if(fullName && specialist && selectedFile){
            if(selectedFile){
            const imageRef = firebase.storage().ref().child('Avatar/' + specialist + '/' + 'Nurse/'+ phoneNumber)
            const uploadTask = imageRef.put(selectedFile)

            uploadTask.then((snapshot) => {
                console.log('upload Avatar succesfully')
                return snapshot.ref.getDownloadURL()
            }).then((downloadURL) => {
                localStorage.setItem('AvatarImgage',downloadURL)
                const imageDisplay = document.getElementById('AvatarDisplay')
                imageDisplay.src = downloadURL;
                imageDisplay.style.display = 'block'
            }).catch((error) => {
            console.error('Loi', error)})
        }
        }else{
            return
        }
        
    })
    

function SubmitInformation(){
    
    
  
  fullName = document.getElementById('full_name').value
  gender = document.getElementById('gender').value
  age = document.getElementById('age').value
  phoneNumber = document.getElementById('number').value
  address = document.getElementById('address').value
  specialist = document.getElementById('specialist').value 
  degree = document.getElementById('degree').value
  avatar = document.getElementById('avatar').value
  userID = firebase.auth().currentUser.uid
  email = document.getElementById("email").value
  var data = {
      Full_Name: fullName,
      Gender: gender,
      Age: age,
      Phone_Number: phoneNumber,
      Address: address,
      ID: userID,
      Specialist: specialist,
      Email: email
  }
  firebase.database().ref('nurseList/' + specialist + '/'+ phoneNumber).update(data)
  .then(()=>{
      console.log('Submit successfully')
      
  }

  )
 
}
function checkSubmit(){
    userID = localStorage.getItem('userID')
    console.log(userID)
    const nurseRef = firebase.database().ref('nurseList')
    nurseRef.once('value', (snapshot) => {
        
        snapshot.forEach((clinicSnapshot) => {
            clinicSnapshot.forEach((childSnapshot) => {
                
                if(childSnapshot.val().Phone_Number === userID){
                    const userData = childSnapshot.val(); // Dữ liệu của người dùng từ cơ sở dữ liệu

// Hiển thị thông tin của người dùng trên thanh nhập
            document.getElementById('full_name').value = userData.Full_Name
            document.getElementById('gender').value = userData.Gender
            document.getElementById('age').value = userData.Age
            document.getElementById('number').value = userData.Phone_Number
            document.getElementById('address').value = userData.Address
            document.getElementById('specialist').value = userData.Specialist
            document.getElementById("email").value = userData.Email
            downloadURL = localStorage.getItem('URLimgage')
                const imageDisplay = document.getElementById('imageDisplay')
                imageDisplay.src = downloadURL;
                imageDisplay.style.display = 'block'
            downloadURL2 = localStorage.getItem('AvatarImgage')
                const imageDisplay2 = document.getElementById('AvatarDisplay')
                imageDisplay2.src = downloadURL2;
                imageDisplay2.style.display = 'block'
                }
            })
        })
    })

    
}
function logout(){
    firebase.auth().signOut().then(function(){
        console.log("User signed out")
    }).catch(function(error){
        console.error("Error signing out", error)
})
}

</script>

</html>